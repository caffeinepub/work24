{
  "kind": "build_request",
  "title": "Fix admin dashboard not showing cross-device activity data",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Debug and fix the backend message storage mechanism to ensure that activities submitted from any device are properly persisted in the canister's stable storage and can be retrieved via getAllMessages query",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ],
        "quotes": [
          "still when i do any activity from another device, in this app's link, the data is not showing in the admin dashboard"
        ]
      },
      "acceptanceCriteria": [
        "Messages submitted from different devices are stored in the backend canister",
        "getAllMessages query returns all stored messages regardless of submission device",
        "Backend storage persists across canister upgrades"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add comprehensive backend logging to diagnose message storage and retrieval: log when messages are received, when they're stored in stable variables, and when they're queried via getAllMessages",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "Debug.print statements added for message storage operations",
        "Debug.print statements added for getAllMessages query execution",
        "Logs include message count and submission details"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Verify and fix the admin dashboard's ActivityFeed and MessagesTab components to ensure they fetch data directly from the backend without any client-side filtering that could hide cross-device submissions",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "ActivityFeed uses useGetAllMessages without client-side filtering",
        "MessagesTab displays all messages returned from the backend",
        "No localStorage or device-specific filtering is applied"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add error boundary and network diagnostics to the admin dashboard to display clear error messages if backend queries fail or return empty results",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-latest"
        ]
      },
      "acceptanceCriteria": [
        "Error states are displayed when backend queries fail",
        "Empty state clearly indicates if no data exists vs. query failure",
        "Network connectivity issues are surfaced to the admin user"
      ]
    }
  ],
  "constraints": [
    "Maintain existing single-actor backend architecture",
    "Do not modify Internet Identity authentication flow",
    "Preserve existing admin session authentication mechanism"
  ],
  "nonGoals": [
    "Implementing real-time updates or WebSockets",
    "Adding new message types or data models",
    "Changing the UI layout or styling of the admin dashboard"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}