{
  "kind": "build_request",
  "title": "Fix activity notifications and real-time message display across dashboards",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Ensure that when a user sells material via SellerMaterialSubmission, a message is created and broadcast to all users on the main dashboard",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "when someone sell material, ragister as worker, it's not showing in main dashboard to all users"
        ]
      },
      "acceptanceCriteria": [
        "Material sale submissions create a message entry visible to all users",
        "Message appears in the main dashboard activity feed immediately after submission",
        "Message content includes material name, category, and seller information"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure that when a user registers as a worker via WorkerSubmission, a message is created and broadcast to all users on the main dashboard",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "when someone sell material, ragister as worker, it's not showing in main dashboard to all users"
        ]
      },
      "acceptanceCriteria": [
        "Worker registration submissions create a message entry visible to all users",
        "Message appears in the main dashboard activity feed immediately after submission",
        "Message content includes worker name, skill, category, and location"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Display all activity messages (material sales, worker registrations, contact requests) in the admin dashboard MessagesTab",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "also not showing in admmin dashboard"
        ]
      },
      "acceptanceCriteria": [
        "Admin MessagesTab shows all message types including material sales and worker registrations",
        "Messages are properly categorized and display source information",
        "Admin can see the complete activity history with timestamps"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Create a main dashboard activity feed component that displays recent messages and activities to all users on the home page",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "not showing in main dashboard to all users"
        ]
      },
      "acceptanceCriteria": [
        "Activity feed component is visible on the main home page (HomeServices)",
        "Feed displays recent material sales, worker registrations, and other activities",
        "Feed updates automatically when new activities occur",
        "Activities are displayed in reverse chronological order"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Update backend to automatically create and store messages when materials are submitted via submitMaterial",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "when someone sell material, ragister as worker, it's not showing in main dashboard"
        ]
      },
      "acceptanceCriteria": [
        "submitMaterial function creates a message entry with material details",
        "Message is stored in the messages collection",
        "Message includes submitter ID and timestamp"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Update backend to automatically create and store messages when workers are registered via submitWorker",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "when someone sell material, ragister as worker, it's not showing in main dashboard"
        ]
      },
      "acceptanceCriteria": [
        "submitWorker function creates a message entry with worker details",
        "Message is stored in the messages collection",
        "Message includes submitter ID and timestamp"
      ]
    },
    {
      "id": "REQ-7",
      "text": "Ensure the admin dashboard summary cards reflect accurate real-time counts including all activity types",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "also not showing in admmin dashboard"
        ]
      },
      "acceptanceCriteria": [
        "Summary cards show correct counts for messages, workers, materials, and total activity",
        "Counts update when new activities are added",
        "All message types are included in the message count"
      ]
    }
  ],
  "constraints": [
    "Do not modify the Internet Identity authentication system",
    "Do not change the single-actor backend architecture",
    "Preserve existing UI component structure in frontend/src/components/ui",
    "Maintain compatibility with existing translation system across English, Hindi, and Gujarati"
  ],
  "nonGoals": [
    "Real-time WebSocket notifications",
    "Push notifications to user devices",
    "Email notifications for activities",
    "Advanced filtering or search in activity feeds"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}